<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Windows Web Desktop</title>
<style>
  /* Reset & basic styling */
  html, body { margin: 0; padding: 0; width: 100%; height: 100%; font-family: "Segoe UI", sans-serif; background: #008080; overflow: hidden; }
  #desktop { width: 100%; height: 100%; position: relative; background: linear-gradient(#008080, #006666); overflow: hidden; }
  .icon { width: 64px; text-align: center; color: white; cursor: pointer; position: absolute; }
  .icon img { width: 48px; height: 48px; display: block; margin: 0 auto; }
  .context-menu { position: absolute; background: #333; color: #fff; border: 1px solid #000; display: none; z-index: 1000; min-width: 150px; font-size: 12px; }
  .context-menu div { padding: 5px 10px; cursor: pointer; }
  .context-menu div:hover { background: #555; }
  /* Start button */
  #start-button { position: absolute; bottom: 10px; left: 10px; width: 120px; height: 40px; background: #eee; border: 1px solid #999; border-radius: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 2000; font-weight: bold; }
  #start-menu { position: absolute; bottom: 60px; left: 10px; width: 200px; background: #ddd; border: 1px solid #999; display: none; z-index: 2000; }
  #start-menu div { padding: 10px; cursor: pointer; border-bottom: 1px solid #aaa; }
  #start-menu div:hover { background: #bbb; }
  /* Windows */
  .window { position: absolute; width: 500px; height: 400px; background: #fff; border: 2px solid #000; display: none; flex-direction: column; z-index: 1000; }
  .window-header { background: #0078d7; color: white; padding: 5px; cursor: move; display: flex; justify-content: space-between; align-items: center; }
  .window-body { flex: 1; padding: 10px; overflow: auto; background: #eee; }
  .close-btn { width: 20px; height: 20px; background: red; text-align: center; line-height: 20px; cursor: pointer; border-radius: 2px; }
  /* Scrollable app store */
  #appstore .window-body { max-height: 300px; overflow-y: auto; }
  .app-item { display: flex; align-items: center; margin-bottom: 10px; cursor: pointer; }
  .app-item img { width: 32px; height: 32px; margin-right: 10px; }
  /* Fullscreen window styles */
  .fullscreen { width: 100% !important; height: 100% !important; top: 0 !important; left: 0 !important; }
  /* Countdown bar */
  .countdown-bar { width: 0%; height: 20px; background: green; margin-top: 20px; transition: width 1s linear; }
</style>
</head>
<body>
<div id="desktop"></div>

<div id="start-button">Start</div>
<div id="start-menu"><div id="return-web">Return to Basic Web</div></div>

<!-- Windows -->
<div class="window" id="minecraft">
  <div class="window-header"><span>Minecraft 1.8.8</span><div class="close-btn">X</div></div>
  <div class="window-body" id="minecraft-body">
    This App Is Unavailable<br>Please Wait While I Find Another Unblocked Version!
  </div>
</div>

<div class="window" id="fortnite">
  <div class="window-header"><span>Fortnite Launcher</span><div class="close-btn">X</div></div>
  <div class="window-body">
    <b>Disclaimer!</b><br>
    You need to be signed in to an Amazon account with Prime to use this service!<br>
    Link your Epic Games account to your Amazon account on luna.amazon.co.uk.<br>
    OTHERWISE THIS WILL NOT WORK!<br><br>
    <button id="launch-fortnite">Launch Anyway</button>
  </div>
</div>

<div class="window" id="deviceinfo">
  <div class="window-header"><span>Device Info</span><div class="close-btn">X</div></div>
  <div class="window-body">
    <b>Browser Info:</b><br>
    User Agent: <span id="ua"></span><br>
    Platform: <span id="platform"></span><br>
    Screen: <span id="screen"></span>
  </div>
</div>

<div class="window" id="requestapp">
  <div class="window-header"><span>Request an App</span><div class="close-btn">X</div></div>
  <div class="window-body">
    <img src="https://cdn-icons-png.flaticon.com/512/61/61112.png" width="64" height="64"><br>
    Suggest a new app to add!
  </div>
</div>

<div class="window fullscreen" id="factory-reset">
  <div class="window-header"><span>Factory Reset</span></div>
  <div class="window-body">
    Windows has been factory reset. All apps will reappear.
    <div class="countdown-bar" id="factory-bar"></div>
  </div>
</div>

<div class="window" id="appstore">
  <div class="window-header"><span>App Store</span><div class="close-btn">X</div></div>
  <div class="window-body" id="appstore-body"></div>
</div>

<script>
const desktop = document.getElementById('desktop');
const startButton = document.getElementById('start-button');
const startMenu = document.getElementById('start-menu');
const returnWeb = document.getElementById('return-web');
const windows = document.querySelectorAll('.window');
const zIndexOrder = [];

let apps = [
  {name:"Factory Reset", id:"factory-reset", icon:"https://cdn-icons-png.flaticon.com/512/3524/3524635.png", deletable:false},
  {name:"Minecraft 1.8.8", id:"minecraft", icon:"https://static.wikia.nocookie.net/minecraft_gamepedia/images/c/c7/Grass_Block.png/revision/latest/scale-to-width-down/268?cb=20230226144250", deletable:true, properties:"made 13 oct 2025, unblocked minecraft in your browser!"},
  {name:"Fortnite Launcher", id:"fortnite", icon:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRvb1r9fOqmmLDhvcAbmV6HRkRuliJAjD-uCQ&s", deletable:true, properties:"made 14 oct 2025, Play fortnite!"},
  {name:"Device Info", id:"deviceinfo", icon:"https://cdn-icons-png.flaticon.com/512/929/929566.png", deletable:true, properties:"made 14 oct 2025, view device info"},
  {name:"Request an App", id:"requestapp", icon:"https://cdn-icons-png.flaticon.com/512/61/61112.png", deletable:true, properties:"made 14 oct 2025, suggest a new app!"}
];

let iconPositions = [
  {top:50, left:20}, {top:50, left:120}, {top:50, left:220}, {top:50, left:320}, {top:50, left:420}
];

function saveDeletedApps() {
  const deleted = apps.filter(a=>a.deleted).map(a=>a.id);
  localStorage.setItem('deletedApps', JSON.stringify(deleted));
}

function loadDeletedApps() {
  const deleted = JSON.parse(localStorage.getItem('deletedApps')||"[]");
  apps.forEach(a=>a.deleted = deleted.includes(a.id));
}

function renderDesktop() {
  desktop.innerHTML="";
  loadDeletedApps();
  apps.forEach((app,i)=>{
    if(app.deleted) return;
    const icon = document.createElement('div');
    icon.className="icon";
    icon.style.top = iconPositions[i%iconPositions.length].top+"px";
    icon.style.left = iconPositions[i%iconPositions.length].left+"px";
    icon.innerHTML=`<img src="${app.icon}"><div>${app.name}</div>`;
    icon.addEventListener('dblclick', ()=>openWindow(app.id));
    icon.addEventListener('contextmenu', e=>{
      e.preventDefault();
      showContextMenu(e.pageX,e.pageY,app);
    });
    desktop.appendChild(icon);
  });
}

function showContextMenu(x,y,app){
  let menu = document.createElement('div');
  menu.className='context-menu';
  menu.style.top = y+'px';
  menu.style.left = x+'px';
  let props = document.createElement('div');
  props.textContent = 'Properties';
  props.onclick=()=>{
    alert(app.properties);
    menu.remove();
  };
  menu.appendChild(props);
  if(app.deletable){
    let del = document.createElement('div');
    del.textContent='Delete';
    del.onclick=()=>{
      app.deleted=true;
      saveDeletedApps();
      renderDesktop();
      menu.remove();
    };
    menu.appendChild(del);
  }
  document.body.appendChild(menu);
  document.addEventListener('click',()=>menu.remove(),{once:true});
  menu.style.display='block';
}

function openWindow(id){
  const win = document.getElementById(id);
  if(!win) return;
  if(id==="minecraft"){
    const password = prompt("Enter Password:");
    if(password!=="secret123"){ alert("Password incorrect"); return; }
  }
  win.style.display='flex';
  bringToFront(win);
}

function closeWindow(id){
  const win = document.getElementById(id);
  if(win) win.style.display='none';
}

function bringToFront(win){
  const zMax = Math.max(...Array.from(windows).map(w=>parseInt(w.style.zIndex)||1000));
  win.style.zIndex = zMax+1;
}

windows.forEach(win=>{
  const closeBtn = win.querySelector('.close-btn');
  if(closeBtn){
    closeBtn.addEventListener('click',()=>win.style.display='none');
  }
  // draggable
  const header = win.querySelector('.window-header');
  let isDragging=false, offsetX, offsetY;
  header.addEventListener('mousedown',e=>{
    isDragging=true; offsetX=e.offsetX; offsetY=e.offsetY; bringToFront(win);
  });
  document.addEventListener('mousemove',e=>{
    if(isDragging){
      win.style.left=(e.pageX-offsetX)+'px';
      win.style.top=(e.pageY-offsetY)+'px';
    }
  });
  document.addEventListener('mouseup',()=>{isDragging=false;});
});

// Start menu toggle
startButton.addEventListener('click',()=>startMenu.style.display=startMenu.style.display==='block'?'none':'block');
returnWeb.addEventListener('click',()=>window.location.href='index.html');

// Device info
document.getElementById('ua').textContent = navigator.userAgent;
document.getElementById('platform').textContent = navigator.platform;
document.getElementById('screen').textContent = `${screen.width}x${screen.height}`;

// Fortnite launch button
document.getElementById('launch-fortnite').addEventListener('click',()=>window.open('https://luna.amazon.co.uk/game/fortnite?lang=en-US&ref=tmp_ext_epic&autoplay=1','_blank'));

// Factory reset
function factoryReset(){
  const win = document.getElementById('factory-reset');
  win.style.display='flex';
  let bar = document.getElementById('factory-bar');
  let width=0;
  const interval = setInterval(()=>{
    width+=10;
    bar.style.width = width+'%';
    if(width>=100){ clearInterval(interval); localStorage.clear(); window.location.href='index.html'; }
  },1000);
}

// App store
const appstoreBody = document.getElementById('appstore-body');
apps.forEach(app=>{
  if(app.id==="factory-reset") return;
  const div = document.createElement('div');
  div.className='app-item';
  div.innerHTML=`<img src="${app.icon}"><span>${app.name}</span>`;
  div.onclick=()=>openWindow(app.id);
  appstoreBody.appendChild(div);
});

renderDesktop();
</script>
</body>
</html>
