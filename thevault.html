<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Windows Basic Web Edition - Desktop</title>
<style>
:root{
  --ui-dark:#0b0b0b;
  --title-blue:#0078d7;
  --cmd-green:#00ff00;
  --muted:#9ca3af;
}
html,body{height:100%;margin:0;overflow:hidden;font-family:Consolas,monospace;color:var(--cmd-green);}
#desktop{position:relative;width:100%;height:100%;background:linear-gradient(#0b0b0b,#111);}
.window{width:600px;height:400px;border:2px solid #333;box-shadow:0 20px 40px rgba(0,0,0,.8);display:flex;flex-direction:column;background:var(--ui-dark);position:absolute;top:50px;left:50px;}
.title-bar{background:var(--title-blue);color:#fff;padding:6px 10px;display:flex;justify-content:space-between;align-items:center;user-select:none;cursor:move;}
.controls{display:flex;gap:8px;}
.control{width:18px;height:18px;background:#fff;color:#000;font-size:12px;border-radius:2px;display:flex;align-items:center;justify-content:center;cursor:pointer;}
#taskbar{position:absolute;bottom:0;left:0;right:0;height:40px;background:#222;display:flex;align-items:center;padding:0 8px;box-shadow:0 -4px 10px rgba(0,0,0,.5);}
#startBtn{width:150px;height:30px;background:var(--title-blue);color:#fff;border:none;border-radius:4px;cursor:pointer;font-family:"Segoe UI",sans-serif;}
.icon{width:80px;text-align:center;color:var(--cmd-green);font-size:12px;cursor:pointer;position:absolute;}
.icon img{width:48px;height:48px;}
.icon.selected{outline:2px solid rgba(0,120,215,0.9);}
</style>
</head>
<body>

<div id="desktop">
  <!-- Minecraft 1.8.8 icon -->
  <div class="icon" style="top:20px;left:20px;" data-app="minecraft">
    <img src="https://upload.wikimedia.org/wikipedia/en/5/51/Minecraft_cover.png" alt="Minecraft Logo"/>
    <div>Minecraft 1.8.8</div>
  </div>
</div>

<div id="taskbar">
  <button id="startBtn">Return to Windows</button>
</div>

<script>
// Vault verification
(function(){
  const SESSION_KEY='vaultAccess';
  const data=sessionStorage.getItem(SESSION_KEY);

  if(!data){ window.location.href='index.html'; return; }
  try {
    const {expiry}=JSON.parse(data);
    if(Date.now() > expiry){ 
      sessionStorage.removeItem(SESSION_KEY); 
      window.location.href='index.html'; 
      return; 
    }
  } catch {
    window.location.href='index.html'; 
    return; 
  }

  // Remove token so it can't be reused
  sessionStorage.removeItem(SESSION_KEY);
})();

// Start button returns to index.html
document.getElementById('startBtn').addEventListener('click', ()=>{
  window.location.href='index.html';
});

// Desktop & windows logic
const desktop=document.getElementById('desktop');

function createWindow(title, url){
  const win=document.createElement('div'); 
  win.className='window';
  win.style.top='0px';
  win.style.left='0px';
  win.style.width='100%';
  win.style.height='100%';
  win.style.maxWidth='100%';
  win.style.maxHeight='100%';
  win.style.zIndex=1000;

  // Title bar
  const titlebar=document.createElement('div'); 
  titlebar.className='title-bar';
  titlebar.textContent=title;

  // Controls
  const controls=document.createElement('div'); 
  controls.className='controls';
  const close=document.createElement('div'); close.className='control'; close.textContent='Ã—';
  controls.appendChild(close);
  titlebar.appendChild(controls);
  win.appendChild(titlebar);

  // Iframe content
  const content=document.createElement('iframe');
  content.src=url;
  content.style.flex='1';
  content.style.border='none';
  content.style.width='100%';
  content.style.height='100%';
  win.appendChild(content);

  desktop.appendChild(win);

  // Dragging
  let offsetX=0,offsetY=0,isDragging=false;
  titlebar.addEventListener('mousedown',e=>{isDragging=true; offsetX=e.offsetX; offsetY=e.offsetY; win.style.zIndex=1000;});
  document.addEventListener('mousemove',e=>{if(isDragging){win.style.left=(e.pageX-offsetX)+'px'; win.style.top=(e.pageY-offsetY)+'px';}});
  document.addEventListener('mouseup',()=>{isDragging=false;});

  close.addEventListener('click',()=>{desktop.removeChild(win);});
}

// Minecraft icon
document.querySelectorAll('.icon').forEach(icon=>{
  icon.addEventListener('dblclick',()=>{
    if(icon.dataset.app==='minecraft'){
      createWindow("Make Sure To Pick Javascript Instead","https://eaglercraft.com/mc/1.8.8");
    }
  });
});
</script>
</body>
</html>
